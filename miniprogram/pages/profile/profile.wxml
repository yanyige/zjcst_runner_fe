<view class="profile-page" wx:if="{{userInfo}}">
  <view class="section user-card">
    <view class="avatar" bindtap="handleChooseAvatar">
      <image wx:if="{{userInfo.avatarUrl}}" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
      <view wx:else class="avatar-placeholder">{{placeholderInitial}}</view>
      <view class="change-tip">ç‚¹å‡»æ›´æ¢å¤´åƒ</view>
    </view>
    <view class="info">
      <view class="name">{{userInfo.name || 'æœªè®¾ç½®å§“å'}}</view>
      <view class="text-muted">å­¦å·ï¼š{{userInfo.student_id || '--'}}</view>
      <view class="text-muted">ç­çº§ï¼š{{userInfo.class_name || '--'}} | å¹´çº§ï¼š{{userInfo.grade || '--'}}</view>
    </view>
  </view>

  <view class="section total">
    <view class="section-title">ç´¯è®¡é‡Œç¨‹</view>
    <view class="distance">{{totalDistance}} km</view>
  </view>

  <view class="section badges" wx:if="{{badges.length}}">
    <view class="section-title">æˆå°±å¾½ç« </view>
    <view class="badge-list">
      <block wx:for="{{badges}}" wx:key="label">
        <view class="badge-item">
          <view class="badge-name">ğŸ† {{item.label}}</view>
          <view class="text-muted">{{item.desc}}</view>
        </view>
      </block>
    </view>
  </view>

  <view class="section" wx:if="{{!badges.length}}">
    <view class="section-title">æˆå°±å¾½ç« </view>
    <view class="text-muted">ç»§ç»­åŠªåŠ›ï¼Œå¾ˆå¿«å°±èƒ½è·å¾—å¾½ç« ï¼</view>
  </view>

  <button class="logout-btn" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
</view>

<view wx:if="{{loading}}" class="loading-mask">
  <text>åŠ è½½ä¸­...</text>
</view>
